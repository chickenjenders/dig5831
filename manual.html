<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Manual Madness ‚Äî Hell Incorporated</title>
  <style>
    /* ‚Äî‚Äî‚Äî Global / Beige Corporate ‚Äî‚Äî‚Äî */
    :root {
      --paper: #f6f1e7;
      --paper-dk: #efe6d8;
      --ink: #2a2a2a;
      --quiet: #6c6257;
      --line: #c9bba6;
      --accent: #b22323;
      /* infernal red */
      --accent-ink: #7e1717;
      --toolbar: #3b3a38;
      --workspace: #d4cbbd;
      /* beige background */
    }

    body {
      font-family: "Helvetica Neue", Arial, sans-serif;
      background: var(--workspace);
      margin: 0;
      color: var(--ink);
    }

    /* ‚Äî‚Äî‚Äî Fake PDF toolbar ‚Äî‚Äî‚Äî */
    #toolbar {
      background: var(--toolbar);
      color: #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 16px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, .35);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    #toolbar-left a,
    #toolbar-left span {
      color: #cfcfcf;
      margin-right: 16px;
      text-decoration: none;
      cursor: pointer;
      font-size: 14px;
    }

    #toolbar-left a:hover,
    #toolbar-left span:hover {
      color: #fff;
    }

    #toolbar-right {
      font-size: 14px;
      color: #ddd;
      display: flex;
      gap: 10px;
      align-items: center;
    }

    #toolbar-right .mascot {
      filter: grayscale(1) contrast(1.2);
    }

    /* ‚Äî‚Äî‚Äî Workspace + Paper ‚Äî‚Äî‚Äî */
    #workspace {
      display: flex;
      justify-content: center;
      padding: 32px;
      min-height: calc(100vh - 50px);
    }

    #manualFrame {
      width: 860px;
      background: var(--paper);
      border-radius: 4px;
      box-shadow: 0 0 24px rgba(0, 0, 0, .35);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      border: 1px solid var(--line);
    }

    /* ‚Äî‚Äî‚Äî Page header + content ‚Äî‚Äî‚Äî */
    #pageHeader {
      background: var(--paper-dk);
      border-bottom: 1px solid var(--line);
      padding: 10px 18px;
      display: flex;
      justify-content: space-between;
      color: var(--quiet);
      font-size: 14px;
      letter-spacing: .2px;
    }

    #pageContent {
      flex: 1;
      padding: 38px 56px;
      line-height: 1.65;
      font-size: 16px;
      color: var(--ink);
      overflow-y: auto;
    }

    /* ‚Äî‚Äî‚Äî Footer controls ‚Äî‚Äî‚Äî */
    #controls {
      background: var(--paper-dk);
      border-top: 1px solid var(--line);
      padding: 10px;
      text-align: center;
    }

    button {
      padding: 8px 16px;
      border: 0;
      border-radius: 4px;
      background: #4a4a4a;
      color: #fff;
      margin: 4px 6px;
      cursor: pointer;
      font-size: 15px;
    }

    button:hover {
      background: #5a5a5a;
    }

    /* ‚Äî‚Äî‚Äî Highlighting (no hint styles) ‚Äî‚Äî‚Äî */
    .word {
      cursor: pointer;
      border-radius: 3px;
    }

    .word.hl {
      background: #ffe75f;
      box-shadow: inset 0 0 0 1px #e2c94b;
    }

    .phrase {
      cursor: pointer;
      border-radius: 3px;
    }

    .phrase.hl {
      background: #ffcf4d;
      outline: 1px solid #caa034;
    }

    /* ‚Äî‚Äî‚Äî Section styling ‚Äî‚Äî‚Äî */
    h2.section {
      margin: 18px 0 10px;
      text-transform: uppercase;
      font-size: 20px;
      letter-spacing: .5px;
      color: var(--accent-ink);
      border-bottom: 2px solid var(--line);
      padding-bottom: 6px;
    }

    h3.subsection {
      margin: 16px 0 6px;
      font-size: 17px;
      color: var(--ink);
      text-decoration: underline;
      text-decoration-color: var(--line);
    }

    .smallcaps {
      font-variant: small-caps;
      letter-spacing: .3px;
    }

    /* Lists */
    ul,
    ol {
      margin: 8px 0 12px 28px;
    }

    li {
      margin: 2px 0;
    }

    /* ‚Äî‚Äî‚Äî Satirical callouts ‚Äî‚Äî‚Äî */
    .callout {
      background: #f3e9df;
      border: 1px solid var(--line);
      border-left: 6px solid var(--accent);
      padding: 10px 12px;
      margin: 14px 0;
      color: var(--ink);
    }

    .callout .title {
      color: var(--accent-ink);
      font-weight: 700;
      margin-right: 8px;
    }

    .quote {
      background: #f1ebe2;
      border-left: 4px solid #a38b6b;
      padding: 8px 12px;
      margin: 12px 0;
      color: #3b332b;
      font-style: italic;
    }

    /* Table of contents box */
    .toc {
      background: #f3eee5;
      border: 1px solid var(--line);
      padding: 12px 14px;
      margin: 14px 0;
    }

    .toc ul {
      list-style: none;
      padding: 0;
      margin: 6px 0 0 0;
    }

    .toc li {
      margin: 2px 0;
      color: var(--quiet);
    }

    .toc li::before {
      content: "‚Ä¢ ";
      color: #a48b6f;
    }

    /* Fade on page change */
    .fade-in {
      animation: fadeIn .25s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0
      }

      to {
        opacity: 1
      }
    }

    /* Feedback area */
    #feedback {
      text-align: center;
      color: var(--accent);
      font-weight: 600;
      margin: 8px 0 24px;
    }
  </style>
</head>

<body>

  <div id="toolbar">
    <div id="toolbar-left">
      <a href="password.html">‚¨Ö Back to Terminal</a>
      <span>üîç Zoom</span>
      <span>üñ® Print</span>
      <span>üíæ Save</span>
    </div>
    <div id="toolbar-right">
      <img class="mascot"
        src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23ddd' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'/><path d='M8 15s1.5-2 4-2 4 2 4 2'/><line x1='9' y1='9' x2='9.01' y2='9'/><line x1='15' y1='9' x2='15.01' y2='9'/></svg>"
        alt="" />
      Hell Incorporated ‚Äî Employee Manual (PDF)
    </div>
  </div>

  <div id="workspace">
    <div id="manualFrame">
      <div id="pageHeader">
        <div><span class="smallcaps">Internal Memorandum</span> ‚Äî H.Inc Corporate Doctrine</div>
        <div id="pageNum">Page 1 / 1</div>
      </div>

      <div id="pageContent"></div>

      <div id="controls">
        <button id="prevPage">Previous</button>
        <button id="nextPage">Next</button>
        <button id="submitHighlights">Submit Highlights</button>
      </div>
    </div>
  </div>

  <p id="feedback"></p>

  <script>
    /* ================================
       REQUIRED TARGETS (ALL must be highlighted)
       ================================ */
    const PRINCIPLES = [
      "Perpetuity is Productivity.",
      "Compliance is Comfort.",
      "Activity is Achievement.",
      "Inquiry is Inefficiency.",
      "Procedure is Providence."
    ];
    // MUST highlight the 5 in the intro list + 5 in content, plus mascot
    const REQUIRED_KEYS = [
      // intro list
      ...PRINCIPLES,
      // body appearances
      ...PRINCIPLES,
      // mascot (match forgivingly in code; canonical key saved as this string)
      "Damnation Dan"
    ];

    /* ================================
       PAGES: formatted with headings/lists/callouts
       ================================ */
    const PAGES = [
      `<h2 class="section">Instructions Note / Intro Page</h2>
<p>Welcome, Newcomer! So you‚Äôve decided (against your will) to join the hardworking folk here at Hell Incorporated. Even at your level of importance, it is pivotal that you understand your position and duties in your new forever home. Hell is a complicated and complex ecosystem of business and functionality that can only thrive with the help of every little demon (yes, even you!).</p>
<p>To ensure that you completely and fully understand what it means to be working here, we have provided you with the all-encompassing worker‚Äôs manual for Hell. This manual covers the goals, aspirations, morals (or lack thereof), expectations, and values of Hell Incorporated.</p>


<h3 class="subsection">Hell Incorporated lives by five amazing principles:</h3>

<ul>
  <li>Perpetuity is Productivity.</li>
  <li>Compliance is Comfort.</li>
  <li>Activity is Achievement.</li>
  <li>Inquiry is Inefficiency.</li>
  <li>Procedure is Providence.</li>
</ul>

<p>These principles are mentioned periodically throughout the manual content. To ensure you have fully read and comprehend the manual and its valuable teachings, you must highlight <strong>ALL</strong> instances where you find these five principles in this manual. Simply click the words to highlight them and submit your findings once you make it to the end of your manual reading.</p>
<div class="quote">‚ÄúThe alliteration should help‚Ä¶ maybe.‚Äù</div>

<div class="callout"><span class="title">A special bonus thing!:</span> Locate our mascot <strong>Damnation Dan</strong>. Highlight him to complete your assignment.</div>

<div class="toc">
  <strong>Table of Contents</strong>
  <ul>
    <li>Why am I a demon?</li>
    <li>What does it mean to be a demon?</li>
    <li>Is there a way out of here?</li>
    <li>Why is Hell a functioning company?</li>
    <li>Where is the bathroom?</li>
    <li>What are the roles of demons here?</li>
    <li>Am I stuck in this position forever?</li>
    <li>Why do we get a break time?</li>
    <li>Can I change clothes?</li>
    <li>What will happen if I refuse to work?</li>
  </ul>
</div>`,

      `<h2 class="section">Welcome to Hell</h2>
<p>This handbook was made so every demon could understand their responsibility and purpose at Hell Incorporated.</p>
<div class="quote">‚ÄúRemember: the manual is more binding than your soul.‚Äù</div>`,

      `<h2 class="section">Why am I a demon?</h2>
  <p>Your presence in this dimension is not an anomaly. It is the logical conclusion of a complex, well-established universal system. You were judged by the Neutral Arbiter (Death) and found to have a soul too corrupted‚Äîor simply too heavy‚Äîto achieve the weightlessness required by our Celestial Competitors. The ensuing re-processing was mandatory to convert your useless human form into a productive infernal asset.</p>
  <p>Do not waste time reflecting on your mortal life; it is classified as ‚Äúhistorical data,‚Äù and H.Inc. does not tolerate historical data leakage. Trust the process. This system has operated for eons, and your existence today is proof of its flawless execution. For the system to be flawless, the rules must be final. Procedure is Providence.</p>
  <div class="callout"><span class="title">‚ö† Policy:</span> Historical data leakage results in immediate Form 33-B escalation.</div>`,

      `<h2 class="section">What does it mean to be a demon?</h2>
<p>It means belonging. It means stability. You are no longer burdened by the chaotic, inefficient whims of human free will, hope, or complex emotional structures. As a demon, you are a refined tool, driven by a pure, singular objective: the administrative upkeep of eternal damnation.</p>
<p>Forget struggle; embrace the inevitability of the path laid out for you. Your job description is your identity. Your cubicle is your forever home. Your life is managed, scheduled, and monitored for maximum operational efficiency. The moment you stop questioning and simply assimilate, the pressure lifts. We find that the most compliant assets are also the least tormented. Compliance is Comfort.</p>`,

      `<h2 class="section">Is there a way out of here?</h2>
<p>This question reflects a fundamental misunderstanding of your contract. ‚ÄúOut‚Äù is a mortal concept related to finite spaces and time. This office, this Manual, and your tenure are all eternal. Our internal models show a statistical zero-percent chance of unauthorized exit. Any perceived ‚Äúway out‚Äù is likely a temporal anomaly or a Recidivism Symptom (See Section 9.C: Therapy & Re-Processing).</p>
<p>Asking this question requires your Supervisor to stop their vital work to respond to your existential crisis. That delay costs H.Inc. resources and lowers departmental metrics. Therefore, questioning established realities is not just disruptive; it is a drain on the entire organization. Inquiry is Inefficiency.</p>
<div class="callout"><span class="title">üìé Reminder:</span> Curiosity is a cost center.</div>`,

      `<h2 class="section">Why is Hell a functioning company?</h2>
<p>Because suffering is a global commodity that requires management. Chaos is profitable, but unmanaged chaos is a liability. We exist to maintain the fine bureaucratic machinery that ensures every tormented soul meets its quarterly anguish quota.</p>
<p>Our business model is based on Infinity. The ultimate goal is the acquisition of every single soul, which requires continuous, monitored expansion to overtake the Celestial Market Share. The goal is not to finish the work; the goal is to ensure the work lasts forever. That means the endless nature of our tasks is the actual product we sell. Perpetuity is Productivity.</p>`,

      `<h2 class="section">Where is the bathroom?</h2>
<p>‚ÄúRelief Stations‚Äù are classified as non-essential infrastructure. Access is heavily restricted and is subject to departmental efficiency metrics. To locate the nearest Relief Station, please consult the Inter-Floor Utilities Map (Form 199-M-rev.4), which is digitally accessible on the Sisyphus II Terminal (Note: Form 199-M requires the H.Inc GIS App, which must be installed using the 47-step process detailed in Addendum 10.A: Software Installation).</p>
<p>Under no circumstances should you interrupt another employee to ask directions. Relief Stations operate at a perpetual 2-hour backlog and require a pre-approved, time-stamped Bio-Excursion Pass (Form 55-B), which must be signed by three (3) different supervisors. Enjoy your break!</p>
<div class="quote">‚ÄúRelief is a privilege, not a right.‚Äù</div>`,

      `<h2 class="section">What are the roles of demons here?</h2>
<p>Your official job title is listed in your Onboarding Packet (Form 1-A). Your primary function is to perform the administrative task associated with that title. However, the true purpose of all demon roles, from Office Worker to Director, is to generate output.</p>
<ul>
  <li>Did you file that memo?</li>
  <li>Did you click ‚ÄúYes‚Äù on that submission form?</li>
  <li>Did you respond to that pointless email thread?</li>
</ul>
<p>That is what matters. Efficacy is secondary to effort. Always be doing, always be generating. The constant motion justifies the entire machine. In H.Inc, the volume of tasks you complete, regardless of their meaning, is your key performance indicator. Activity is Achievement.</p>`,

      `<h2 class="section">Am I stuck in this position forever?</h2>
<p>H.Inc is committed to the concept of ‚ÄúCareer Longevity.‚Äù Vertical and lateral promotions are available to those who achieve exemplary compliance scores and demonstrate a sufficient commitment to the tenets of Perpetuity and Inquiry is Inefficiency.</p>
<p>To apply for a promotion, you must file a Statement of Ambition (Form 73-L), which requires notarized signatures from every colleague and supervisor in your sector. Upon submission, the form will be reviewed by the Department of Ascendance, which may or may not exist. While applications may take anywhere from three business days to three millennia to process, remember that the act of applying itself demonstrates valuable activity.</p>
<div class="callout"><span class="title">‚ö† HR Notice:</span> Non-existent departments remain fully enforceable.</div>`,

      `<h2 class="section">Why do we get a break time?</h2>
<p>The four-minute Sustenance Interval is a regrettable necessity stemming from an archaic, non-negotiable decree from a long-defunct celestial body. It is not a reward. It is a scheduled, monitored period for mandatory documentation.</p>
<ol>
  <li>Sign in (Form 44-R).</li>
  <li>Maintain a regulated pace of 3.3 steps per second.</li>
  <li>Sign out (Form 44-S) and submit Form 99-P (Post-Break Reflection).</li>
</ol>
<p>Any unscheduled deviation from your workstation is considered ‚ÄúLoitering with Infernal Intent‚Äù and will result in a Strike 1 violation.</p>
<div class="quote">Damnation Dan waves enthusiastically and reminds you to rehearse the Five Principles aloud.</div>`,

      `<h2 class="section">Can I change clothes?</h2>
<p>Absolutely not. The Grey Mandate (See also: Section 2.A of Vol. 1) is a non-negotiable, eternal policy. Your issued burlap jumpsuit and grey loafers are the standard uniform for all assets, regardless of former mortal station or current demon rank. The color grey is the absence of individuality, and the material is designed for maximum discomfort.</p>
<p>Any attempt to modify, accessorize, or even wash your uniform is a direct act of Recidivism and will be reported to Compliance. This uniformity is critical. Your personal identity is now corporate property.</p>`,

      `<h2 class="section">What will happen if I refuse to work?</h2>
<p>Insubordination is inefficient. Your refusal to engage in your assigned duties will be treated as an unauthorized cessation of activity, requiring immediate and costly Re-Processing. This is not a punishment, but a necessary recalibration.</p>
<p>You will be sent back to the lower layers for another cycle of Corruption and subsequent conversion into a more compliant, productive asset. We strongly encourage you to reflect upon the value of Compliance is Comfort. before attempting any actions that necessitate your exposure to the Soul-Mulcher.</p>
<div class="callout"><span class="title">‚ö† Final Admonition:</span> Progress will be <em>deleted</em> for incomplete compliance.</div>`
    ];

    /* ================================
       RENDERING + HIGHLIGHT LOGIC (HTML-aware)
       ================================ */

    /* State */
    let currentPage = 0;
    /* Track normal word highlights (fun) */
    const wordHighlights = new Set(); // keys like `${page}:w:${ord}`
    /* Track phrase instance highlights */
    const highlightedInstances = new Set(); // `${page}:${phraseIdx}:${occ}`
    /* Required counts (intro+body duplicates) */
    const requiredCounts = new Map();
    REQUIRED_KEYS.forEach(k => requiredCounts.set(k, (requiredCounts.get(k) || 0) + 1));
    /* User counts */
    const userCounts = new Map(); // phrase -> count

    const pageNumEl = document.getElementById("pageNum");
    const pageContentEl = document.getElementById("pageContent");
    const feedbackEl = document.getElementById("feedback");

    /* Escape for regex */
    function esc(s) { return s.replace(/[.*+?^${}()|[\]\\]/g, "\\$&"); }

    /* Build forgiving regex for a required phrase */
    function phraseRegex(phrase) {
      if (phrase === "Damnation Dan") {
        return new RegExp("\\bDamnation\\s+Dan\\b", "g");
      }
      // allow optional trailing period
      const safe = esc(phrase).replace(/\\\.$/, "\\.?");
      return new RegExp(safe, "g");
    }

    /* Render page with HTML preserved, then wrap tokens */
    function renderPage() {
      pageContentEl.classList.remove("fade-in"); void pageContentEl.offsetWidth; pageContentEl.classList.add("fade-in");
      feedbackEl.textContent = "";

      // 1) Insert placeholders for each required phrase (supports duplicates)
      let html = PAGES[currentPage];
      const tokens = []; // { idx, phrase, token }
      REQUIRED_KEYS.forEach((phrase, idx) => {
        const token = `__PHRASE_${idx}__`;
        const re = phraseRegex(phrase);
        if (re.test(html)) {
          html = html.replace(re, token);
          tokens.push({ idx, phrase, token });
        }
      });

      // 2) Replace placeholders with span HTML, assign deterministic instance ids per occurrence on this page
      //    We‚Äôll count by how many times each token appears while replacing.
      const occMap = new Map(); // token -> occ
      tokens.forEach(({ idx, phrase, token }) => {
        let occ = 0;
        const reTok = new RegExp(token, "g");
        html = html.replace(reTok, () => {
          const inst = `${currentPage}:${idx}:${occ++}`;
          return `<span class="phrase" data-key="${phrase}" data-inst="${inst}">${phrase}</span>`;
        });
      });

      // 3) Put HTML into the page
      pageContentEl.innerHTML = html;

      // 4) Attach phrase listeners & restore visual state
      pageContentEl.querySelectorAll(".phrase").forEach(span => {
        const inst = span.dataset.inst;
        const key = span.dataset.key;
        if (highlightedInstances.has(inst)) {
          span.classList.add("hl");
        }
        span.addEventListener("click", () => {
          if (span.classList.contains("hl")) {
            span.classList.remove("hl");
            highlightedInstances.delete(inst);
            userCounts.set(key, Math.max(0, (userCounts.get(key) || 0) - 1));
          } else {
            span.classList.add("hl");
            highlightedInstances.add(inst);
            userCounts.set(key, (userCounts.get(key) || 0) + 1);
          }
        });
      });

      // 5) Wrap remaining text nodes‚Äô words with .word spans (click-to-highlight for fun)
      wrapTextNodesForWords(pageContentEl);

      // 6) Page indicator
      pageNumEl.textContent = `Page ${currentPage + 1} / ${PAGES.length}`;
    }

    /* Walk text nodes and wrap words (skip inside .phrase) */
    function wrapTextNodesForWords(root) {
      const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, {
        acceptNode(node) {
          if (!node.nodeValue.trim()) return NodeFilter.FILTER_REJECT;
          if (node.parentElement && node.parentElement.closest(".phrase")) return NodeFilter.FILTER_REJECT;
          return NodeFilter.FILTER_ACCEPT;
        }
      });
      const nodes = [];
      while (walker.nextNode()) nodes.push(walker.currentNode);

      let ord = 0;
      nodes.forEach(node => {
        const frag = document.createDocumentFragment();
        const parts = node.nodeValue.split(/(\s+)/);
        parts.forEach(part => {
          if (!part) return;
          if (/\s+/.test(part)) {
            frag.appendChild(document.createTextNode(part));
          } else {
            const key = `${currentPage}:w:${ord++}`;
            const span = document.createElement("span");
            span.className = "word";
            if (wordHighlights.has(key)) span.classList.add("hl");
            span.textContent = part;
            span.addEventListener("click", () => {
              if (span.classList.contains("hl")) {
                span.classList.remove("hl");
                wordHighlights.delete(key);
              } else {
                span.classList.add("hl");
                wordHighlights.add(key);
              }
            });
            frag.appendChild(span);
          }
        });
        node.parentNode.replaceChild(frag, node);
      });
    }

    /* Nav */
    document.getElementById("prevPage").addEventListener("click", () => { if (currentPage > 0) { currentPage--; renderPage(); } });
    document.getElementById("nextPage").addEventListener("click", () => { if (currentPage < PAGES.length - 1) { currentPage++; renderPage(); } });

    /* Submit check ‚Äî require counts for ALL required phrases (including duplicates) */
    document.getElementById("submitHighlights").addEventListener("click", () => {
      const missing = [];
      requiredCounts.forEach((need, phrase) => {
        const have = userCounts.get(phrase) || 0;
        if (have < need) missing.push(`${phrase} (${have}/${need})`);
      });

      if (missing.length === 0) {
        document.body.innerHTML = `
    <div style="text-align:center; margin-top:22vh;">
      <h1 style="color:#b22323; font-size:64px; margin-bottom:40px;">Congratulations! You understand Hell.</h1>
      <button id="nextAssignment" 
        style="padding:14px 28px; background:#b22323; color:#fff; font-size:18px; border:none; border-radius:6px; cursor:pointer; transition:background 0.3s;">
        Start Next Work Assignment
      </button>
    </div>
  `;
        const nextBtn = document.getElementById("nextAssignment");
        nextBtn.addEventListener("mouseover", () => nextBtn.style.background = "#8f1b1b");
        nextBtn.addEventListener("mouseout", () => nextBtn.style.background = "#b22323");
        nextBtn.addEventListener("click", () => {
          window.location.href = "popup.html";
        });
      } else {
        alert("Submission incomplete. Please review all material carefully.\nMissing:\n- " + missing.join("\n- "));
        // Reset (bureaucratic cruelty)
        currentPage = 0;
        wordHighlights.clear();
        highlightedInstances.clear();
        userCounts.clear();
        renderPage();
      }
    });

    /* Init */
    renderPage();
  </script>
</body>

</html>